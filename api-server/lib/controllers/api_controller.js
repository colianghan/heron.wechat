// Generated by CoffeeScript 1.7.1(function() {  var consts, express, helper_wechat, logger;  consts = require("../consts/consts");  express = require("express");  helper_wechat = require("../helper/wechat")(consts.WECHAT_TOKEN);  logger = require("../helper/logger").getLogger("api_controller");  this.wechat = (function() {    function wechat() {}    wechat.get = function(req, res, next) {      if (!helper_wechat.checkSignature(req.query)) {        logger.error(req.query);        return res.send(200, "");      } else {        return res.send(200, req.query.echostr);      }    };    wechat.post = function(req, res, next) {      if (!helper_wechat.checkSignature(req.query)) {        logger.error(req.query);        return res.send(200, "");      } else {        return helper_wechat.getMsg(req, function(data) {          var msg, xml;          console.log(data);          msg = {            FromUserName: data.ToUserName,            ToUserName: data.FromUserName,            Content: "demo: 最近的上课时间是 2014-06-09 周一 数据结构，上课时间：18:30，地点：3-301。作业进度：<a href=\"#\">点击查看详情</a>"          };          xml = helper_wechat.parseMsg(msg);          return res.send(xml);        });      }    };    return wechat;  })();  module.exports = this;}).call(this);//# sourceMappingURL=api_controller.map